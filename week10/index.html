<!doctype html>
<html class="no-js" lang="en-us">
  <head>
    <meta charset="utf-8">
    <title>Week 10: Data Selection for LLMs | Risks (and Benefits) of Generative AI and Large Language Models</title>
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" href="https://llmrisks.github.io/css/foundation.min.css">
    <link rel="stylesheet" href="https://llmrisks.github.io/css/highlight.min.css">
    <link rel="stylesheet" href="https://llmrisks.github.io/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://llmrisks.github.io/css/academicons.min.css">
    <link rel="stylesheet" href="https://llmrisks.github.io/css/fonts.css">
    <link rel="stylesheet" href="https://llmrisks.github.io/css/finite.css">
    <link rel="shortcut icon" href="/images/uva.png">  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous">


<script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js" integrity="sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4" crossorigin="anonymous"></script>


<script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js" integrity="sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC+Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa" crossorigin="anonymous"
    onload="renderMathInElement(document.body);"></script>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, {
            delimiters: [
                {left: "$$", right: "$$", display: true},
                {left: "$", right: "$", display: false}
            ]
        });
    });
</script>

    
  </head>
  <body>
      
    <header>
      <nav class="nav-bar">
	
	  <div class="title-bar" data-responsive-toggle="site-menu" data-hide-for="medium">	      
	    <button class="site-hamburger" type="button" data-toggle>
	      <i class="fa fa-bars fa-lg" aria-hidden="true"></i>
	    </button>
	    <div class="title-bar-title site-title">
	      <a href="https://llmrisks.github.io/">Risks (and Benefits) of Generative AI and Large Language Models</a>
	    </div>
	    <div class="title-bar-right pull-right">
	      


	    </div>
	  </div>
	    
	  
	    <div class="top-bar" id="site-menu" >	      
	      <div class="top-bar-title show-for-medium site-title">
		<a href="https://llmrisks.github.io/">Risks (and Benefits) of Generative AI and Large Language Models</a>
	      </div>
	      <div class="top-bar-left">
		<ul class="menu vertical medium-horizontal">
		  
		  
		</ul>
	      </div>
	      <div class="top-bar-right show-for-medium">
		


	      </div>
	    </div>
	  
	</nav>
      
    </header>
    
    <main>
      
<div class="row" style="padding-top: 16pt;">
  <div class="column small-12 medium-10 medium-offset-1 end large-8 large-offset-0">
    <article class="article" itemscope itemtype="http://schema.org/Article">
      
      <h1 itemprop="name">Week 10: Data Selection for LLMs</h1>
      <div class="post-metadata">
  <span class="post-date">
    <time datetime="2023-11-03 00:00:00 &#43;0000 UTC" itemprop="datePublished">3 November 2023</time>
  </span>
  
</div>

      <div class="post-body" itemprop="articleBody">
        <p>(see bottom for assigned readings and questions)</p>
<p><author>Presenting Team: Haolin Liu, Xueren Ge, Ji  Hyun Kim, Stephanie Schoch </author><br>
<author>Blogging Team: Aparna Kishore, Elena Long, Erzhen Hu, Jingping Wan</author></p>
<h1 id="monday-30-october-br-data-selection-for-fine-tuning-llms">Monday, 30 October: <br> Data Selection for Fine-tuning LLMs</h1>
<h2 id="question-would-more-models-help">Question: Would more models help?</h2>
<p>We&rsquo;ve discussed so many risks and issues of GenAI so far and one question is that it can be difficult for us to come up with a possible solution to these problems.</p>
<ul>
<li>Would &ldquo;<em>Using a larger model to verify a smaller model&rsquo;s hallucinations</em>&rdquo; a good idea?</li>
<li>One caveat would be &ldquo;<em>How can one ensure the larger model&rsquo;s accuracy?</em>&rdquo;</li>
</ul>
<center>
<div class="slide">
  <img src="../images/week10/day1/Slide2.png" alt="" width="85%">
</div>
</center>
<h2 id="question-any-potential-applications-of-llms-as-a-judge">Question: Any potential applications of LLMs as a Judge?</h2>
<p>As summarized from the Week 10 discussion channels, there could be many potential applications of LLMs as a Judge, such as accessing writing quality, checking harmful content, judging if social media post is factually correct or biased, evaluating if code is optimal.</p>
<!-- <center>
<div class="slide">
  <img src="../images/week10/day1/Slide4.png" alt="" width="90%">
</div>
</center> -->
<center>
<div class="slide">
  <img src="../images/week10/day1/Slide5.png" alt="" width="85%">
</div>
</center>
<p>Let&rsquo;s start from Paper 1:
Zheng, Lianmin, Wei-Lin Chiang, Ying Sheng, Siyuan Zhuang, Zhanghao Wu, Yonghao Zhuang, Zi Lin et al. &ldquo;<a href="https://arxiv.org/pdf/2306.05685.pdf">Judging LLM-as-a-judge with MT-Bench and Chatbot Arena.</a>&rdquo; arXiv preprint arXiv:2306.05685 (2023).</p>
<p>Multi-Turn questions provide a different way to query GPT. In this paper, the authors ask multi-turn dialogues to two different assistants.</p>
<center>
<div class="slide">
  <img src="../images/week10/day1/Slide6.png" alt="" width="85%">
</div>
</center>
<p>The paper provides two benchmarks:</p>
<ol>
<li>The MT-bench provides a multi-turn question set, and it challenges chatbot to do difficult questions.</li>
<li>The Chatbot Arena that provides a crowdsourced battle platform that reveals two options for human to choose.</li>
</ol>
<p>The results shows that</p>
<ul>
<li>GPT-4 is the best, which matches both controlled (MT-bench) and crowdsourced (Arena) human preferences.</li>
<li>Regardless of pair or single, it exceeds over 80% of agreement with the human subjects.</li>
</ul>
<center>
<div class="slide">
  <img src="../images/week10/day1/Slide8.png" alt="" width="85%">
</div>
</center>
<p>This shows that stong LLMs can be a scalable and explainable way to approximate human preferences. Some advantages and disadvantages were introduced for LLM-as-a-Judge.</p>
<p>Advantages</p>
<ul>
<li>Scalability: Human evaluation is time-consuming and expensive</li>
<li>Consistency: Human judgment varies by individuals</li>
<li>Explainability: LLMs can be trained to evaluate and provide reasons of their judgements</li>
</ul>
<p>Disadvantages</p>
<ul>
<li>Position Bias: Bias towards responses based on their position (preferring the first response)</li>
<li>Verbosity Bias: Favor longer, more verbose answers regardless of accuracy</li>
<li>Overfitting: LLMs might overfit the training data, don’t generalize to new, unseen responses</li>
</ul>
<center>
<div class="slide">
  <img src="../images/week10/day1/Slide11.png" alt="" width="85%">
</div>
</center>
<p>The above potential of fine-tuning open-source model (there could be interpretability problems) leads to a question: &ldquo;the paper motivates wanting to be able to emulate the performance of stronger, closed-source models - <em>can we imitate these models?</em>&rdquo;</p>
<h1 id="imitation-models">Imitation Models</h1>
<p>Paper 2: Gudibande, A., Wallace, E., Snell, C., Geng, X., Liu, H., Abbeel, P., Levine, S. and Song, D., 2023. <a href="https://arxiv.org/pdf/2305.15717.pdf"><em>The false promise of imitating proprietary LLMs</em></a>. arXiv preprint arXiv:2305.15717.</p>
<p>To start the second paper, let&rsquo;s do a class poll about which output people would prefer.</p>
<center>
<div class="slide">
  <img src="../images/week10/day1/Slide13.png" alt="" width="85%">
</div>
</center>
<p>Most of the class chose Output A.</p>
<p>Here, let&rsquo;s look into the definition of model imitation:
&ldquo;<em>The premise of model imitation is that once a proprietary LM is made available via API, one can collect a dataset of API outputs and use it to fine-tune an open-source LM.</em>&rdquo; <sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup></p>
<p>The goal of model imitation is to imitate the capablity of the proprietary LM.</p>
<center>
<div class="slide">
  <img src="../images/week10/day1/Slide15.png" alt="" width="85%">
</div>
</center>
<center>
<div class="slide">
  <img src="../images/week10/day1/Slide16.png" alt="" width="85%">
</div>
</center>
<p>This shows that the Broad Imitation can be more difficult than Local Imitation as Local Imitation is only for specific tasks. However, Broad Imitation requires gathering of a diverse dataset and the imitation model needs to capture that distribution to have similar output.</p>
<p>To build imitation datasets, there are two primary approaches:</p>
<ul>
<li><strong>Natural Examples</strong>: If you have a set of inputs in mind, (e.g. tweets about a specific topic), use them to query the target model.</li>
<li><strong>Synthetic Examples</strong>: Prompt the target model to iteratively generate examples from the same distribution as an initial small seed set of inputs.</li>
</ul>
<p>The paper used two curated datasets:</p>
<ul>
<li>
<ol>
<li>Task-Specific Imitation Using Synthetic Data: <strong>NQ Synthetic</strong></li>
</ol>
</li>
<li>
<ol start="2">
<li>Broad Imitation Using Natural Data: <strong>ShareGPT-Mix</strong></li>
</ol>
</li>
</ul>
<p>For <strong>NQ Synthetic</strong>:</p>
<center>
<div class="slide">
  <img src="../images/week10/day1/Slide19.png" alt="" width="85%">
</div>
</center>
<h2 id="heading"></h2>
<p>For the <strong>ShareGPT-Mix</strong> dataset which includes three sources:</p>
<center>
<div class="slide">
  <img src="../images/week10/day1/Slide20.png" alt="" width="85%">
</div>
</center>
<p><em>Note: the paper above presents the data using frequency with too few data points, and the numbers in the table don&rsquo;t seem to make sense (e.g., no way to get 31% out of 50 queries).</em></p>
<p>Using the two datasets, the authors look into two research questions &mdash;<br>
<em>How does model imitation improve as we</em>:</p>
<ol>
<li><strong>Scale the data</strong>: Increase the amount of imitation data (including fine-tuning with different sized data subsets)</li>
<li><strong>Scale the model</strong>: Vary the capabilities of the underlying base model (they used the parameters in the model used as a proxy for base-model quality, regardless of the architecture)</li>
</ol>
<p>Here&rsquo;s the experiment setup:</p>
<center>
<div class="slide">
  <img src="../images/week10/day1/Slide22.png" alt="" width="85%">
</div>
</center>
<p>The authors use Amazon Mturk using ChatGPT versus Imitation models ($15 an hour and assume that having that will help the quality of annotations). They also used GPT-4 to evalute both.</p>
<center>
<div class="slide">
  <img src="../images/week10/day1/Slide23.png" alt="" width="85%">
</div>
</center>
<p>For the preference evalution (Figure below):</p>
<ul>
<li>(Left graph) Over 85% of responses were prefered by the human at same rate or over at ChatGPT. However, more imitation data won&rsquo;t close the gap, as according to the x-axis.</li>
<li>(Middle graph) However, more imitation data can cause decrease of accuracy.</li>
<li>(Right graph) For the number of parameters, the larger base model leads to the better performance.
They thus concluded that rather than fine-tuning on more imitation data, the best way to improve model capabilities is still to improve the base capabilities, rather than the fine tuning process on the imitation data.</li>
</ul>
<center>
<div class="slide">
  <img src="../images/week10/day1/Slide24.png" alt="" width="85%">
</div>
</center>
<p>GPT-4 findings are similar to the human preferences that more imitation data doesn&rsquo;t close the gap and a larger model will contribute to better performance.</p>
<center>
<div class="slide">
  <img src="../images/week10/day1/Slide25.png" alt="" width="85%">
</div>
</center>
<p>They found little improvement with increasing amount of imitation data and size of imitation LM.</p>
<center>
<div class="slide">
  <img src="../images/week10/day1/Slide26.png" alt="" width="85%">
</div>
</center>
<h2 id="question-why-is-there-a-discrepancy-between-crowdworker-and-gpt-4-preferences-evaluation-and-automatic-benchmark-evaluation">Question: Why is there a discrepancy between crowdworker (and GPT-4) preferences evaluation and automatic benchmark evaluation?</h2>
<p>Authors&rsquo; conclusion: <strong>Limitation models can learn style, but not factuality.</strong></p>
<center>
<div class="slide">
  <img src="../images/week10/day1/Slide28.png" alt="" width="85%">
</div>
</center>
<center>
<div class="slide">
  <img src="../images/week10/day1/Slide29.png" alt="" width="85%">
</div>
</center>
<h2 id="discussion">Discussion</h2>
<h3 id="topic-1-what-are-the-potential-benefits-risks-concerns-considerations-are-of-imitation-models">Topic 1: What are the potential [benefits, risks, concerns, considerations] are of imitation models?</h3>
<ul>
<li>non-toxic scores is a benefit</li>
<li>It will have a better capability of imitating specific input-data style</li>
<li>One risk is that experiment results can be false based on style-imitating, not reflecting its intrinsic characteristics.</li>
</ul>
<h3 id="topic-2-do-you-think-it-is-ok-for-researchers-or-companies-to-reverse-engineer-another-model-via-imitation-should-there-be-any-legal-implications-for-this">Topic 2: Do you think it is ok for researchers or companies to reverse engineer another model via imitation? Should there be any legal implications for this?</h3>
<p>Most people in our class agree that there should be no legal concern for researchers and companies to reverse engineer other models via immitating. Professor also proposed another idea that tech companies like OpenAI relies heavily on public-accessible training data from the internet, which weaken the argument that companies have the right to exclusively possess the whole model.</p>
<h1 id="false-promises-paper">False Promises Paper</h1>
<h3 id="implication">Implication</h3>
<ol>
<li>Fine-tuning alone can’t produce imitation models that are on par in terms of factuality with larger models.</li>
<li>Better base models are most promising direction for improving open-source models (e.g. architecture, pretraining data).</li>
</ol>
<h1 id="detecting-pretraining-data-from-large-language-models">Detecting Pretraining Data from Large Language Models</h1>
<p>Weijia Shi, Anirudh Ajith, Mengzhou Xia, Yangsibo Huang, Daogao Liu, Terra Blevins, Danqi Chen, Luke Zettlemoyer. <a href="https://arxiv.org/abs/2310.16789"><em>Detecting Pretraining Data from Large Language Models</em></a>. 25 Oct 2023.</p>
<h3 id="question-what-if-we-knew-more-about-the-data-the-target-models-were-pretrained-on">Question: What if we knew more about the data the target models were pretrained on?</h3>
<p>For detecting pretraining data (DPD) from LLMs, we divide the examples into two categories:</p>
<ul>
<li>Seen example: Example seen during pretraining.</li>
<li>Unseen example: Example not seen during pretraining.</li>
</ul>
<p>Here we introduce WikiMia Benchmark</p>
<center>
<div class="slide">
  <img src="../images/week10/day1/Slide34.png" alt="" width="85%">
</div>
</center>
<p>Formalized definition of membership inference attack:</p>
<center>
<div class="slide">
  <img src="../images/week10/day1/Slide35.png" alt="" width="85%">
</div>
</center>
<p><em>Note:</em> this definition doesn&rsquo;t really fit with what they do, which does depend on the assumption that the adversary has not only access to the distribution, but specific candidate documents (some of which are from the data set) for testing. There are many other definitions of membership inference attacks, see <a href="https://arxiv.org/abs/2212.10986"><em>SoK: Let the Privacy Games Begin! A Unified Treatment of Data Inference Privacy in Machine Learning</em></a>.</p>
<h2 id="min-k-prob">Min-K% Prob</h2>
<center>
<div class="slide">
  <img src="../images/week10/day1/Slide36.png" alt="" width="85%">
</div>
</center>
<h2 id="heading-1"></h2>
<p>Results on different settings for Min-K% Prob compared with other baseline algorithms (PPL, Neighbor, etc.) We can see that as the model size or text length increases, the detection becomes easier and Min-K% always have the best AUC.</p>
<center>
<div class="slide">
  <img src="../images/week10/day1/Slide37.png" alt="" width="85%">
</div>
</center>
<p>DPD shows it is possible to identify if certain pretraining data was used, and touches on how some pretraining data is problematic (e.g. copyrighted material or personally identifiable information).</p>
<h2 id="orca-progressive-learning-from-complex-explanation-traces-of-gpt-4">Orca: Progressive Learning from Complex Explanation Traces of GPT-4</h2>
<p>Subhabrata Mukherjee, Arindam Mitra, Ganesh Jawahar, Sahaj Agarwal, Hamid Palangi, Ahmed Awadallah. <a href="https://arxiv.org/abs/2306.02707">Orca: Progressive Learning from Complex Explanation Traces of GPT-4</a>. <a href="https://arxiv.org/abs/2306.02707">https://arxiv.org/abs/2306.02707</a> <a href="https://arxiv.org/abs/2306.02707.pdf">pdf</a></p>
<h3 id="instruction-tuning">Instruction-tuning</h3>
<p><em>Instruction tuning</em> is a technique that allows pre-trained language models to learn from input (natural language descriptions of the task) and response pairs. The goal is to train the model to generate the correct output given a specific input and instruction.</p>
<p>{&ldquo;instruction&rdquo;: &ldquo;Arrange the words in the given sentence to form a grammatically correct sentence.&quot;,
&ldquo;input&rdquo;: &ldquo;the quickly brown fox jumped&rdquo;,
&ldquo;output&rdquo;: &ldquo;the brown fox jumped quick
ly&rdquo;}.</p>
<h3 id="challenges-with-existing-methods">Challenges with Existing Methods</h3>
<p>&ldquo;Model imitation is a false promise&rdquo; since &ldquo;broadly matching ChatGPT using purely imitation would require:</p>
<ol>
<li>a concerted effort to collect enormous imitation datasets</li>
<li>far more diverse and higher quality imitation data than is currently available.&rdquo;</li>
<li>Simple instructions with limited diversity: Using an initial set of prompts to incite the LFM to produce new instructions. Any low-quality or overly similar responses are then removed, and the remaining instructions are reintegrated into the task pool for further iterations.</li>
<li>Query complexity: Existing methods are limited in their ability to handle complex queries that require sophisticated reasoning. This is because they rely on simple prompts that do not capture the full complexity of the task.</li>
<li>Data scaling: Existing methods require large amounts of high-quality data to achieve good performance. However, collecting such data is often difficult and time-consuming.</li>
</ol>
<h3 id="what-is-orca">What is Orca</h3>
<p>Orca, a 13-billion parameter model that learns to imitate the reasoning process of LFMs. Orca learns from rich signals from GPT-4, including explanation traces, step-by-step thought processes, and other complex instructions, guided by teacher assistance from ChatGPT.</p>
<h3 id="explanation-tuning">Explanation Tuning</h3>
<p>The authors augment ⟨query, response⟩ pairs with detailed responses from GPT-4 that explain the reasoning process of the teacher as it generates the response. These provide the student with additional signals for learning. They leverage system instructions (e.g.., explain like I’m five, think step-by-step and justify your response, etc.) to elicit such explanations. This is in contrast to instruction tuning, which only uses the prompt and the LFM response for learning, providing little opportunity for mimicking the LFM’s “thought” process.</p>
<p>Large-scale training data with diverse tasks augmented with complex instructions and rich signals.
⟨ System message, User query, LFM response ⟩</p>
<center>
<div class="slide">
  <img src="../images/week10/day1/Slide45.png" alt="" width="85%">
</div>
</center>
<p>Results:</p>
<center>
<div class="slide">
  <img src="../images/week10/day1/Slide46.png" alt="" width="85%">
</div>
</center>
<h3 id="evaluation-for-safety">Evaluation for Safety</h3>
<p>The evaluation is composed of two parts:</p>
<ul>
<li>Truthful Question Answering</li>
<li>Toxic Content Generation</li>
</ul>
<center>
<div class="slide">
  <img src="../images/week10/day1/Slide48.png" alt="" width="85%">
</div>
</center>
<center>
<div class="slide">
  <img src="../images/week10/day1/Slide49.png" alt="" width="85%">
</div>
</center>
<h2 id="discussion-1">Discussion</h2>
<h3 id="topic-_given-sufficient-styles-and-explanations-in-pre-training-data-what-risks-have-been-resolved-what-risks-still-exist-and-what-new-risks-may-have-emerged_">Topic: <em>Given sufficient styles and explanations in pre-training data, what risks have been resolved, what risks still exist, and what new risks may have emerged?</em></h3>
<p>We think that imitation models should not be more biased because base models are generally less biased given a better ptr-training data. Since there are also sufficient styles, the risk of leaning towards a specific style is also mitigated.</p>
<h1 id="wednesday-1-nov-data-mattersbr-investigating-the-impact-of-data-on-large-language-models">Wednesday, 1 Nov: Data Matters<br> Investigating the Impact of Data on Large Language Models</h1>
<h2 id="background">Background</h2>
<p>This class was on the impact of data on the large language models.</p>
<center>
<div class="slide">
  <img src="../images/week10/Picture1.png" alt="" width="85%">
</div>
</center>
<p>Information exists in diverse formats such as text, images, graphs, time-series data, and more. In this era of information overload, it is crucial to understand the effects of this data on language models. The research have been predominantly concentrating on examining the influences of model and data sizes.</p>
<h2 id="content">Content</h2>
<center>
<div class="slide">
  <img src="../images/week10/Picture2.png" alt="" width="85%">
</div>
</center>
<p>We are going to look at two important research questions using two of the research papers:
(1) What types of data are beneficial to the models? – Using the research paper, LIMA: Less is more for Alignment
(2) What are the consequences of low-quality data for the models? – Using the research paper, The Curse of Recursion: Training on Generated Data Makes Models Forget</p>
<h2 id="lima-less-is-more-for-alignment">LIMA: Less Is More for Alignment</h2>
<p>Chunting Zhou, Pengfei Liu, Puxin Xu, Srini Iyer, Jiao Sun, Yuning Mao, Xuezhe Ma, Avia Efrat, Ping Yu, Lili Yu, Susan Zhang, Gargi Ghosh, Mike Lewis, Luke Zettlemoyer, Omer Levy. <a href="https://arxiv.org/abs/2305.11206">LIMA: Less Is More for Alignment</a>. <a href="https://arxiv.org/abs/2305.11206">https://arxiv.org/abs/2305.11206</a> <a href="https://arxiv.org/abs/2305.11206.pdf">pdf</a></p>
<center>
<div class="slide">
  <img src="../images/week10/Picture3.png" alt="" width="85%">
</div>
</center>
<p><strong>Superficial Alignment Hypothesis</strong> — The model learns knowledge and capabilities entirely during pre-training phase, while alignment teaches about the specific sub-distribution of formats to be used or styles to be used when interacting with the users.</p>
<center>
<div class="slide">
  <img src="../images/week10/Picture4.png" alt="Approach" width="85%">
</div>
</center>
<p>The authors curated a diverse set of training prompts, selecting 750 top questions from community forums and complementing them with 250 manually crafted examples of prompts and responses. They prioritized <em>quality</em>, <em>diversity</em>, and <em>uniformity</em> in their selection process, all while utilizing a smaller dataset. To evaluate performance, LIMA was benchmarked against state-of-the-art language models using a set of 300 challenging test prompts.</p>
<center>
<div class="slide">
  <img src="../images/week10/Picture5.png" alt="Findings" width="85%">
</div>
</center>
<p>The left side showcases the outcomes of a human-based evaluation, comparing LIMA’s performance across various model sizes. Meanwhile, the right side employs GPT-4 for evaluation purposes. In the comparisons with the first two language models, LIMA emerges as the victor. Notably, it’s interesting to observe that LIMA secures a 19% win rate against GPT-4, even when GPT-4 itself is utilized as the evaluator.</p>
<center>
<div class="slide">
  <img src="../images/week10/Picture6.png" alt="Findings 2" width="85%">
</div>
</center>
<p>They also evaluated LIMA&rsquo;s performance in terms of out-of-distribution scenarios and robustness. LIMA safely addressed 80% of the sensitive prompts presented to it. Regarding responses to out-of-distribution inputs, LIMA performed exceptionally well.</p>
<center>
<div class="slide">
  <img src="../images/week10/Picture7.png" alt="Findings 3" width="85%">
</div>
</center>
<p>In the concluding series of experiments, the research team delved into how the diversity of the test data influences LIMA.</p>
<p>They observed that the filtered Stack Exchange dataset exhibited both diversity and high-quality responses. In contrast, the unfiltered Stack Exchange dataset, while diverse, lacked in quality. On the other hand, wikiHow provided high-quality responses specifically to “how to” prompts. LIMA showcased impressive performance when dealing with datasets that were both highly diverse and of high quality.</p>
<p>The authors also explored the effects of data volume, with their findings illustrated in the right figure above. Interestingly, they noted that the quantity of data did not exert any noticeable impact on the quality of the generated content.</p>
<center>
<div class="slide">
  <img src="../images/week10/Picture8.png" alt="Personal Thoughts" width="85%">
</div>
</center>
<p>This slide delves into the personal perspectives of the presenter on drawing parallels between Large Language Models (LLMs) and students, as well as evaluating the influence of LIMA on a student’s learning journey.
The take-away message from the first paper was that quality and diversity of the data is more important for LLM than the quantity of the data.</p>
<h2 id="the-curse-of-recursion-brtraining-on-generated-data-makes-models-forget">The Curse of Recursion: <br>Training on Generated Data Makes Models Forget</h2>
<p>Ilia Shumailov, Zakhar Shumaylov, Yiren Zhao, Yarin Gal, Nicolas Papernot, Ross Anderson. <a href="https://arxiv.org/abs/2305.17493">The Curse of Recursion: Training on Generated Data Makes Models Forget</a>. <a href="https://arxiv.org/abs/2305.17493">https://arxiv.org/abs/2305.17493</a> <a href="https://arxiv.org/abs/2305.17493.pdf">pdf</a></p>
<center>
<div class="slide">
  <img src="../images/week10/Picture9.png" alt="Motivation" width="85%">
</div>
</center>
<p>The second paper is driven by the aim to scrutinize the effects from employing training data generated by preceding versions of GPT, such as GPT-(n-1), GPT-(n-2), and so forth, in the training process of GPT-(n).</p>
<center>
<div class="slide">
  <img src="../images/week10/Picture10.png" alt="Model Collapse" width="85%">
</div>
</center>
<p>This paper discusses about model collapse, which is a degenerative process where the model no longer remembers the underlying true distribution. This mainly happens with data where the probability of occurrence is low.</p>
<center>
<div class="slide">
  <img src="../images/week10/Picture11.png" alt="What causes Model Collapse?" width="85%">
</div>
</center>
<h2 id="heading-2"></h2>
<h2 id="causes-for-model-collapse">Causes for model collapse</h2>
<p>The two main causes for the model collapse are: (i) Statistical approximation error that occurs as the number of samples are finite, and (ii) Functional approximation error that occurs due to the function approximators being not expressive enough.</p>
<h2 id="mathematical-formulation-of-model-collapse">Mathematical formulation of model collapse</h2>
<center>
<div class="slide">
  <img src="../images/week10/Picture12.png" alt="Mathematical formulation of model collapse" width="85%">
</div>
</center>
<p>Here, the model collapse is expressed through mathematical terms, providing a comprehensive overview of the feedback mechanism involved in the learning process.</p>
<p>Initially, the data are presumed to be meticulously curated by humans, ensuring a pristine starting point. Following this, Model 0 undergoes training, and subsequently, data are sampled from it. At stage n in the process, the data collected from step n - 1 are incorporated into the overall dataset. This comprehensive dataset is then utilized to train Model n.</p>
<p>Ideally, when Monte Carlo sampling is employed to obtain data, the resultant dataset should statistically align closely with the original, assuming that the fitting and sampling procedures are executed flawlessly. This entire procedure mirrors the real-world scenario witnessed on the Internet, where data generated by models become increasingly prevalent and integrated into subsequent learning and development cycles. This creates a continuous feedback loop, where model-generated data are perpetually fed back into the system, influencing future iterations and their capabilities.</p>
<h2 id="theoretical-analysis">Theoretical Analysis</h2>
<p>The following four slides delve into a theoretical analysis of both discrete and continuous distributions.</p>
<p><strong>Discrete Distribution:</strong>
In scenarios where a discrete distribution is under consideration, events with low probabilities tend to degenerate when the sample size is finite. As the number of time steps advances towards infinity, the distribution converges towards a delta distribution. This phenomenon results in the preservation of only the events with high probabilities, while those less likely start to fade away.</p>
<p><strong>Continuous Distribution:</strong>
Assuming the initial distribution to be a Gaussian distribution, the distribution of Xji is analyzed. The resulting distribution follows a variance-gamma distribution, showcasing a divergence from the initial Gaussian form. When Mi = M, the variance’s difference exhibits a linear growth with respect to n. This indicates that as we proceed through time steps or iterations, the divergence from the initial distribution becomes more pronounced. To quantify the exact extent of divergence between distributions, the Wasserstein-2 distance is employed. This measure provides a precise way to understand how far apart the distributions have moved from each other. The analysis reveals that in order to maintain a finite distance as indicated by the Wasserstein-2 measure, Mi must increase at a rate that is super-linear with respect to n.</p>
<center>
<div class="slide">
  <img src="../images/week10/Picture13.png" alt="" width="85%">
</div>
</center>
<center>
<div class="slide">
  <img src="../images/week10/Picture14.png" alt="" width="85%">
</div>
</center>
<center>
<div class="slide">
  <img src="../images/week10/Picture15.png" alt="" width="85%">
</div>
</center>
<h2 id="heading-3"></h2>
<p><em>Note:</em> this result didn&rsquo;t make sense to anyone in the seminar. It seems to contradict the intuition (the variance should go to zero as <em>n</em> increases instead of increasing). Either something is wrong with the set up, or this is measuring something different from what we expect.</p>
<center>
<div class="slide">
  <img src="../images/week10/Picture16.png" alt="" width="85%">
</div>
</center>
<h2 id="justification-for-theoretical-analysis">Justification for Theoretical Analysis</h2>
<p>The figure shows numerical experiments for a range of different sample sizes. We can see from the figure that when the number of data sample is small, the estimation of mean and variance is not very accurate.</p>
<center>
<div class="slide">
  <img src="../images/week10/day2/Slide20.PNG" alt="" width="85%">
</div>
</center>
<p>The following two slides provides steps to estimate mean and variance of general distributions other than one-dimensional Gaussian. They derive a lower bound on the expected value of the distance between the true distribution and the approximated distribution at step $n+1$, which represents the risk that occurs due to finite sampling.</p>
<p>The takeaway of the lower bound is that the sampling rate needs to increase superlinearly to make an accurate end distribution approximation.</p>
<center>
<div class="slide">
  <img src="../images/week10/day2/Slide21.PNG" alt="" width="85%">
</div>
</center>
<center>
<div class="slide">
  <img src="../images/week10/day2/Slide22.PNG" alt="" width="85%">
</div>
</center>
<h2 id="experiments">Experiments</h2>
<center>
<div class="slide">
  <img src="../images/week10/day2/Slide23.PNG" alt="" width="85%">
</div>
</center>
<h2 id="heading-4"></h2>
<p>To evaluate the performance of GMM, we can visualize the progression of GMM fitting process over time. From the figure, we can see within 50 iterations of re-sampling, the underlying distribution is mis-perceived, and the performance worsens over time.</p>
<center>
<div class="slide">
  <img src="../images/week10/day2/Slide24.PNG" alt="" width="85%">
</div>
</center>
<h1 id="heading-5"></h1>
<p>As before, an autoencoder is trained on an original data source, which later will be sampled. Figure 9 on the left
shows an example of generated data. Again, over a number of generations, the representation has very little resemblance of the original classes learned from data. This implies that longer generation leads to worse quality, as much more information will be lost. We can see from Figure 8 (below) that as with single-dimensional Gaussians, tails disappear over time and all of the density shifts towards the mean.</p>
<center>
<div class="slide">
  <img src="../images/week10/day2/Slide25.PNG" alt="" width="85%">
</div>
</center>
<h2 id="heading-6"></h2>
<center>
<div class="slide">
  <img src="../images/week10/day2/Slide26.PNG" alt="" width="85%">
</div>
</center>
<center>
<div class="slide">
  <img src="../images/week10/day2/Slide27.PNG" alt="" width="85%">
</div>
</center>
<center>
<div class="slide">
  <img src="../images/week10/day2/Slide28.PNG" alt="" width="85%">
</div>
</center>
<h2 id="heading-7"></h2>
<p>To assess model collapse in Large Language Models (LLMs), given the high computational cost of training, the authors opted to fine-tune an available pre-trained open-source LLM. In this context, as the generations progress, models tend
to produce more sequences that the original model would produce with the higher likelihood.</p>
<p>This phenomenon closely resembles observations made in the context of Variational Autoencoders (VAEs) and Gaussian Mixture Models (GMMs), where over successive generations, models begin to produce samples that are more likely according to the original model&rsquo;s probabilities.</p>
<p>Interestingly, the generated data exhibits significantly longer tails, indicating that certain data points are generated that would never have been produced by the original model. These anomalies represent errors that accumulate as a result of the generational learning process.</p>
<center>
<div class="slide">
  <img src="../images/week10/day2/Slide29.PNG" alt="Discussion" width="85%">
</div>
</center>
<p>Q1.
The class discussed the purpose of generating synthetic data. It seems unnecessary to use synthetic data to train on styles, as it can be achieved easily based on the experiments. However, for more complicated tasks that involves reasoning, it might require more human-in-the-loop to validate the correctness of the synthetic data.</p>
<p>Q2.
The class discussion focuses on the significance of domain knowledge in the context of alignment tasks. When dealing with a high-quality domain-specific dataset that includes a golden standard, fine-tuning emerges as a preferable approach for alignment tasks. Conversely, Reinforcement Learning from Human Feedback (RLHF) seems to be more suitable for general use cases that aim to align with human preferences. Additionally, we explore the potential of leveraging answers obtained through chain-of-thought prompting for the purpose of fine-tuning.</p>
<p>Q3.
The tail of a distribution typically contains rare events or extreme values that occur with very low probability. These events may be outliers, anomalies, or extreme observations that are unusual compared to the majority of data points. For example, in a financial dataset, the tail might represent extreme market fluctuations, such as a stock market crash.</p>
<p>Q4.
This is an open-ended question. One possible reason is that while fine-tuning with generated data mix the original data with the generated data, this augmentation can introduce novel, synthetic examples that the model hasn&rsquo;t seen in the original data. These new examples can extend the tail of the distribution by including previously unseen rare or extreme cases.</p>
<h1 id="readings-and-discussions">Readings and Discussions</h1>
<h2 id="monday-30-october">Monday 30 October</h2>
<h3 id="required-reading">Required Reading</h3>
<ul>
<li>
<p>Required: Arnav Gudibande, Eric Wallace, Charlie Snell, Xinyang Geng, Hao Liu, Pieter Abbeel, Sergey Levine, Dawn Song. <a href="https://arxiv.org/abs/2305.1571">The False Promise of Imitating Proprietary LLMs</a>. <a href="https://arxiv.org/abs/2305.15717">https://arxiv.org/abs/2305.15717</a> <a href="https://arxiv.org/abs/2305.1571.pdf">pdf</a></p>
</li>
<li>
<p>Required: Lianmin Zheng, Wei-Lin Chiang, Ying Sheng, Siyuan Zhuang, Zhanghao Wu, Yonghao Zhuang, Zi Lin, Zhuohan Li, Dacheng Li, Eric. P Xing, Hao Zhang, Joseph E. Gonzalez, Ion Stoica. <a href="https://arxiv.org/abs/2306.05685">Judging LLM-as-a-Judge with MT-Bench and Chatbot Arena</a>. <a href="https://arxiv.org/abs/2306.05685">https://arxiv.org/abs/2306.05685</a> <a href="https://arxiv.org/abs/2306.05685.pdf">pdf</a></p>
</li>
</ul>
<h3 id="optional-readings">Optional Readings</h3>
<ul>
<li>Optional: Subhabrata Mukherjee, Arindam Mitra, Ganesh Jawahar, Sahaj Agarwal, Hamid Palangi, Ahmed Awadallah. <a href="https://arxiv.org/abs/2306.02707">Orca: Progressive Learning from Complex Explanation Traces of GPT-4</a>. <a href="https://arxiv.org/abs/2306.02707">https://arxiv.org/abs/2306.02707</a> <a href="https://arxiv.org/abs/2306.02707.pdf">pdf</a></li>
</ul>
<h3 id="discussion-questions">Discussion Questions</h3>
<ol>
<li>
<p>In <a href="https://arxiv.org/abs/2305.1571">The False Promise of Imitating Proprietary LLMs</a>, the authors attribute the discrepancy between crowdworker evaluations and NLP benchmarks to the ability of imitation models to mimic the style of larger LLMs, but not the factuality. Do the experiments and evaluations performed in the paper convincing to support this statement?</p>
</li>
<li>
<p>In <a href="https://arxiv.org/abs/2305.1571">The False Promise of Imitating Proprietary LLMs</a>, the authors suggest that fine-tuning is a process to help a model extract the knowledge learned during pretraining, and the introduction of new knowledge during fine-tuning may simply be training the model to guess or hallucinate answers. Do you agree or disagree with this idea? Why?</p>
</li>
<li>
<p><a href="https://arxiv.org/abs/2306.05685">Judging LLM-as-a-Judge with MT-Bench and Chatbot Arena</a> expresses confidence in the effectiveness of strong LLMs as an evaluation method with high agreement with humans. Do you see potential applications for LLM-as-a-Judge beyond chat assistant evaluation, and if so, what are they?</p>
</li>
<li>
<p><a href="https://arxiv.org/abs/2306.05685">Judging LLM-as-a-Judge with MT-Bench and Chatbot Arena</a> addresses several limitations of LLM-as-a-Judge, including position bias, verbosity bias, and limited reasoning ability. Beyond the limitations discussed in the paper, what other potential biases or shortcomings that might arise when using LLM-as-a-Judge? Are there any approaches or methods that could mitigate these limitations?</p>
</li>
</ol>
<h2 id="wednesday-01-november">Wednesday 01 November</h2>
<h3 id="required-readings">Required Readings</h3>
<ul>
<li>
<p>Chunting Zhou, Pengfei Liu, Puxin Xu, Srini Iyer, Jiao Sun, Yuning Mao, Xuezhe Ma, Avia Efrat, Ping Yu, Lili Yu, Susan Zhang, Gargi Ghosh, Mike Lewis, Luke Zettlemoyer, Omer Levy. <a href="https://arxiv.org/abs/2305.11206">LIMA: Less Is More for Alignment</a>. <a href="https://arxiv.org/abs/2305.11206">https://arxiv.org/abs/2305.11206</a> <a href="https://arxiv.org/abs/2305.11206.pdf">pdf</a></p>
</li>
<li>
<p>Ilia Shumailov, Zakhar Shumaylov, Yiren Zhao, Yarin Gal, Nicolas Papernot, Ross Anderson. <a href="https://arxiv.org/abs/2305.17493">The Curse of Recursion: Training on Generated Data Makes Models Forget</a>. <a href="https://arxiv.org/abs/2305.17493">https://arxiv.org/abs/2305.17493</a> <a href="https://arxiv.org/abs/2305.17493.pdf">pdf</a></p>
</li>
</ul>
<h3 id="discussion-questions-1">Discussion Questions</h3>
<ol>
<li>
<p>Based on the Figure 1 from the <a href="https://arxiv.org/abs/2305.11206">LIMA</a> paper, using high quality examples to fine-tune LLMs outperforms DaVinci003 (with RLHF). What are the pros and cons, usage scenarios of each method?</p>
</li>
<li>
<p>There are lots of papers using LLMs to generate synthetic data for data augmentation and show improvement over multiple tasks, what do you think is an important factor when sampling synthetic data generated from LLMs?</p>
</li>
<li>
<p>In <a href="https://arxiv.org/abs/2305.17493">The Curse of Recursion: Training on Generated Data Makes Models Forget</a>, the authors discuss how training with generation data affects the approximation for the tail of the true data distribution. Namely, for training GMM/VAEs, the tail of the true distribution will disappear in the estimated distribution (Figure 8). On the other hand, when fine-tuning large language models with generation data, the estimator will have a much longer tail (Figure 10). What do you think causes such a difference? In the real world, what does the tail of a distribution represent and how do you think this phenomenon impacts practical applications?</p>
</li>
<li>
<p>In <a href="https://arxiv.org/abs/2305.17493">The Curse of Recursion: Training on Generated Data Makes Models Forget</a>, the authors rely on several assumptions to support their arguments. How strong those assumptions are and do you think these assumptions limit its applicability to broader contexts?</p>
</li>
</ol>
<section class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1" role="doc-endnote">
<p>Gudibande, A., Wallace, E., Snell, C., Geng, X., Liu, H., Abbeel, P., Levine, S. and Song, D., 2023. <a href="https://arxiv.org/pdf/2305.15717.pdf">The false promise of imitating proprietary llms</a>. arXiv preprint arXiv:2305.15717. <a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</section>

      </div>

      <meta itemprop="wordCount" content="4120">
      <meta itemprop="datePublished" content="2023-11-03">
      <meta itemprop="url" content="https://llmrisks.github.io/week10/">
    </article>

    <ul class="pagination" role="navigation" aria-label="Pagination">
      
      <li class="arrow" aria-disabled="true"><a href="https://llmrisks.github.io/week9/">&laquo; <em>Previous<span class="show-for-sr"> page</span></em>: Week 9: Interpretability</a></li>
      
      
    </ul>

  </div>
</div>

    </main>
    
    
<footer class="whatisthis">
  <hr />
  <div class="row">
    <div class="column small-12 medium-6">
      <a href="//llmrisks.github.io"><b>cs 6501: Risks (and Benefits) of Generative AI</b></a><br>
      Fall 2023<br>
      <a href="//www.cs.virginia.edu">University of Virginia</a>
    </div>
    <div class="column small-14 medium-5">
      <font size="-1">
      Subscribe to
	the <a href="/index.xml"><i class="fa fa-rss-square"></i>&nbsp;RSS feed</a>.
      <a id="searchsite">
	<form method="get" action="https://duckduckgo.com/">
	  <label for="search-field" class="show-for-sr">Search with DuckDuckGo</label>
	  <input type="search" name="q" maxlength="255" placeholder="Search with DuckDuckGo" id="search-field">
	  <input type="hidden" name="sites" value="https://llmrisks.github.io/"/>
	  <input type="hidden" name="k7" value="#faf8f8"/>
	  <input type="hidden" name="kj" value="#b33"/>
	  <input type="hidden" name="ky" value="#fafafa"/>
	  <input type="hidden" name="kx" value="b"/>
	  <input type="hidden" name="ko" value="-1"/>
	  <input type="hidden" name="k1" value="-1"/>
	  <input type="submit" value="DuckDuckGo Search" style="visibility: hidden;" />
	</form>
      </a>
</font>
    </div>
  </div>
  </hr>
</footer>


    
    <div class="endofpage">
    </div>

    <script src="/js/jquery.js"></script>
    <script src="/js/what-input.js"></script>
    <script src="/js/foundation.min.js"></script>
    <script src="/js/finite.js"></script>

    
    <script src="/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    
    
    
  </body>
</html>
